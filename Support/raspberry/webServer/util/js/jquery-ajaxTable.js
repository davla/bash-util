(function(n){n.fn.ajaxTable=function(){var r,u,t,i;if(typeof arguments[0]=="object"){t=arguments[0];switch(this.prop("tagName").toLowerCase()){case"table":this.emptyFunction=function(){this.find("tr:gt(0)").remove()};break;case"tbody":this.emptyFunction=this.empty;break;default:console.log("ajaxTable can obly be applied to tables and tbodies");return}return this.initialized=!0,this.ajaxSettings=this.extend({url:t.url,dataType:"json"},t.ajax),this.makeRows=t.makeRows,this.autoEmpty=t.autoEmpty||!0,t.pagination&&(this.pagination=new Pagination(t.pagination),this.resetPage=t.resetPage||!1),this}if(this.initialized){if(this.pagination&&Pagination.prototype[arguments[0]])return r=arguments[0],u=Array.prototype.slice.call(arguments,1),Pagination.prototype[r].apply(this.pagination,u);switch(arguments[0]){case"submit":return t=arguments[1],this.pagination&&(i=this.pagination.pageChanged?this.pagination.pageNumber():1,t+="&pageLength="+this.pagination.pageLength+"&page="+i,this.pagination.pageChanged=!1),n.ajax(this.extend({data:t,success:function(n){this.autoEmpty&&this.emptyFunction(),this.makeRows(this,n),this.pagination&&(typeof n!="object"&&typeof n!="array"?this.pagination[i==1?"only":"last"]():i==1?this.pagination[n.length<this.pagination.pageLength?"only":"first"]():this.pagination[n.length<this.pagination.pageLength?"last":"other"](i))}.bind(this)},this.ajaxSettings)),this;case"pageLength":case"pageChanged":if(this.pagination)return this.getterSetter.apply(this.pagination,arguments);console.log("Pagination not set");break;case"resetPage":if(this.pagination)return this.getterSetter(arguments[0],arguments[1]);console.log("Pagination not set");break;case"autoEmpty":return this.getterSetter(arguments[0],arguments[1]);default:console.log("'"+arguments[0]+"': No such method")}}else console.log("ajaxTable is not initialized")}})(jQuery);
