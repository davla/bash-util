<?php function makeOptions($options,$keysAsValues=false){foreach($options as $key=>$option){$pieces[]='<option';if(is_array($option)){$text=">${option['text']}</option>";unset($option['text']);foreach($option as $attribute=>$value){if(isset($value))$pieces[]=" $attribute='$value'";}$pieces[]=$text;}else {if($keysAsValues)$pieces[]=" value='$key'";$pieces[]=">$option</option>";}}return implode('',$pieces);}function array_columns($array,$keys,$aliases,$reindex=false){if(!is_array($aliases))$aliases=$keys;return array_map(function ($line)use ($keys,$aliases,$reindex){return array_merge(...array_map(function ($key,$alias)use (&$line,$reindex){return [$reindex?$line[$alias]:$alias=>$line[$key]];},$keys,$aliases));},$array);}function array_group($array,$column){$columnValues=array_unique(array_column($array,$column));return array_combine($columnValues,array_map(function($value)use ($array,$column){return array_merge(array_filter($array,function (&$row)use ($value,$column){if($row[$column]==$value){unset($row[$column]);return true;}return false;}));},$columnValues));}function safe_array_merge($array0,$array1){$isArray0=is_array($array0);$isArray1=is_array($array1);if($isArray0&&$isArray1)return array_merge($array0,$array1);if($isArray0)return $array0;if($isArray1)return $array1;return null;}function readJSONFile($filePath,$toHTMLEntities=true){$fileContents=file_get_contents($filePath);if($toHTMLEntities)$fileContents=htmlentities($fileContents,ENT_NOQUOTES,'utf-8');return json_decode($fileContents,true);}function filterIsset($array){return array_filter($array,function($value){return isset($value);});}function filterInputArrayDie($input,$definition,$strictBool=false){$booleans=array_map(function($filter){return (is_array($filter)?$filter['filter']:$filter)==FILTER_VALIDATE_BOOLEAN;},$definition);static $filterBool=['filter'=>FILTER_VALIDATE_BOOLEAN,'flags'=>FILTER_NULL_ON_FAILURE];if($strictBool){foreach($definition as &$filter){if(is_array($filter)&&$filter['filter']==FILTER_VALIDATE_BOOLEAN)$filter=array_merge($filterBool,$filter);else if($filter==FILTER_VALIDATE_BOOLEAN)$filter=$filterBool;}}$filteredInput=filter_input_array($input,$definition,false);foreach($filteredInput as $key=>$value){if($value===null||$value===false&&!$booleans[$key]){echo "Error with input parameter '$key': invalid value<br />";$error=true;}}if($error)die;return $filteredInput;}
