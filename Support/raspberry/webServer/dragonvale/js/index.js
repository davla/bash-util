(function(n){var t=function(t,i,r,u,f){t.eq(0).data(i)?t.each(function(){var t=n(this);t.data(r,t.text()),t.text(t.data(i))}):t.each(function(){var i=n(this),t=i.text(),e;i.data(r,t),t.length>8&&(t=t.replace(":",".")),t=f(t),e=Math.floor(t.asDays()),u&&e>0?i.text(sprintf("%02d:%02d:%02d:%02d",e,t.hours(),t.minutes(),t.seconds())):i.text(sprintf("%02d:%02d:%02d",t.asHours(),t.minutes(),t.seconds()))})},i=function(n,t){t.find(":disabled").prop("disabled",!1);var i=n.find(":selected").data("oppositeId");i&&t.find('[value="'+i+'"]').prop("disabled",!0),t.trigger("chosen:updated")};n(function(){var u=n("tbody"),c=n("form"),l=n('select[name="id"]'),a=n('input[type="checkbox"]'),p=l.add(a),r=n('select[name="time"]'),w=r.add(a).add('select[name^="elem"], select[name^="parent"]'),f=n('input[name="reduced"]'),e=n('input[name="displayDays"]'),h,v=n("select"),o=n('select[name="parent1"]'),s=n('select[name="parent2"]'),y;u.ajaxTable({url:"./php/ajax.php",makeRows:dragonRows,autoEmpty:!0,pagination:paginationDefaults("Pagina non valida")}),c.submit(function(){var n=l.val()!="0"?p:w;return u.ajaxTable("submit",n.activeCtrls({request:"dragons"})),!1}),u.ajaxTable("addPageCheckListener","page","change",function(){c.submit()}),n('[type="submit"]').click(function(){u.ajaxTable("pageChanged",!1)}),f.change(function(){var u,o;if(f.prop("checked"))var s=.8,n="reduced",i="full";else var s=1.25,n="full",i="reduced";e.prop("checked")?(u=!0,n+="Days",i+="Days"):(u=!1,n+="NoDays",i+="NoDays"),o=function(n){return moment.duration(moment.duration(n).asMilliseconds()*s)},t(h,n,i,u,o),r.trigger("chosen:updated"),t(resultTimes,n,i,u,o)}),e.change(function(){var n,i,u;f.prop("checked")?(n="reduced",i="reduced"):(n="full",i="full"),e.prop("checked")?(u=!0,n+="Days",i+="NoDays"):(u=!1,n+="NoDays",i+="Days"),t(h,n,i,u,moment.duration),r.trigger("chosen:updated"),t(resultTimes,n,i,u,moment.duration)}),o.change(function(){i(o,s)}),s.change(function(){i(s,o)}),v.addClass("chosen"),v.chosen({inherit_select_classes:!0,no_results_text:"Niente che inizi con "}),y={request:"init",reduced:f.prop("checked")?1:0,displayDays:e.prop("checked")?1:0},n.getJSON("./php/ajax.php",y,function(t){for(var i=0;i<t.length;++i)r.append(n("<option></option>",t[i]));r.trigger("chosen:updated"),h=r.children("option:gt(0)")}),o.change(),s.change()})})(jQuery);
