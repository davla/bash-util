#!/usr/bin/env bash

# This scripts is meant to be run in the background to
# checks for system updates. If any are found it reopens
# itself in a terminal window with the upgrades ready
# to be installed.

#####################################################
#
#           Terminal: ready to upgrade
#
#####################################################

if tty -s; then
	apt-get upgrade
	exit 0
fi

#####################################################
#
#       Background: checking for updates
#
#####################################################

apt-get update
apt-get upgrade --assume-no

# Updates found, opening terminal window
[[ $? -ne 0 ]] && run-in-terminal "bash $0"
